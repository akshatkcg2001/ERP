"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[946],{1946:(it,T,s)=>{s.r(T),s.d(T,{CustomOrderModule:()=>et});var m=s(6814),L=s(6208),C=s(6472),Z=s(3838),S=s(165),U=s(5056),y=s(1549),b=s(9157),D=s(2524),J=s(1088),h=s(9772),p=s(9397),Y=s(7101),F=s(694),t=s(9468),I=s(4664),A=s(2096),u=s(2579),_=s(8102),q=s(393);const a=(0,_.MT)({name:"customOrder"},(0,u.h4)({idKey:"id"}));(0,q.m)(a,{maxAge:2}).destroy();class g{constructor(){this.customOrder$=a.pipe((0,u.WK)())}selectAll(){return this.customOrder$}selectById(n){return a.pipe((0,u.CL)(n))}upsertCustomOrders(n){a.update((0,u.g3)(n))}addTodo(n){a.update((0,u.dP)([n]))}updateCustomOrder(n){a.update((0,u.jB)(n.id,n))}deleteCustomOrder(n){a.update((0,u._L)(n))}selectHasCache(){return this.customOrder$.pipe((0,I.w)(n=>(0,A.of)(n.length>0)))}getById(n){return a.query((0,u.Hv)(n))}upsertById(n){a.update((0,u.dP)(n))}deleteById(n){a.update((0,u._L)(n))}}var f=s(6232),M=s(8180),O=s(6306),E=s(5177),B=s(8154),H=s(7283);let x=(()=>{class o{constructor(e,r,i){this.store=e,this.CarpetInventoryService=r,this.messageService=i}getAll(){return this.store.selectHasCache().pipe((0,M.q)(1),(0,I.w)(e=>{const r=this.CarpetInventoryService.getAllCustomOrder().pipe((0,O.K)(i=>(this.messageService.error("Error on getting custom orders:",i),f.E)),(0,p.b)(i=>{this.store.upsertCustomOrders(i)}));return e?(0,A.of)([]):r}),(0,E.g)(0))}upsertCustomOrder(e){return 0===e.id?this.CarpetInventoryService.insertCustomOrder(e).pipe((0,O.K)(r=>(this.messageService.error("Error on insert customOrder:",r),f.E)),(0,p.b)(r=>{this.messageService.success("Custom Order Saved Successfully"),this.store.upsertById(r)})):this.CarpetInventoryService.updateCustomOrder(e).pipe((0,O.K)(r=>(this.messageService.error("Error on update customOrder:",r),f.E)),(0,p.b)(r=>{this.messageService.success("Custom Order Updated Successfully"),this.store.updateCustomOrder(r)}))}deleteCustomOrder(e){this.CarpetInventoryService.deleteCustomOrder(e).pipe((0,O.K)(r=>(this.messageService.error("Error on delete customOrder:",r),f.E)),(0,p.b)(r=>{this.store.deleteById(e.id),this.messageService.success("Custom Order Deleted Successfully")})).subscribe()}static#t=this.\u0275fac=function(r){return new(r||o)(t.LFG(g),t.LFG(B.F),t.LFG(H.H))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var K=s(2051);function $(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"i",12),t.NdJ("click",function(){const d=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.navigateCustomOrder(d.id))}),t.qZA(),t.TgZ(15,"i",13),t.NdJ("click",function(){const d=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.openDeleteConfirmationModal(d))}),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.orderNumberId),t.xp6(2),t.Oqu(e.contractorId),t.xp6(2),t.Oqu(e.personOfContact),t.xp6(2),t.Oqu(e.dateOfDelivery),t.xp6(2),t.Oqu(e.photo)}}function G(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"app-card",2),t._UZ(3,"h4",3),t.TgZ(4,"h4",4)(5,"h4"),t._uU(6,"Custom Order List"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.navigateCustomOrder())}),t._UZ(8,"i",6),t._uU(9," Add Custom Order "),t.qZA()(),t._UZ(10,"hr"),t.TgZ(11,"div",7)(12,"table",8)(13,"thead")(14,"tr")(15,"th"),t._uU(16,"#"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Order No."),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Contractor"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"POC"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"DOD"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Photo"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Action"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,$,16,6,"tr",9),t.ALo(31,"paginate"),t.qZA()()(),t.TgZ(32,"div",10)(33,"pagination-controls",11),t.NdJ("pageChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.pagingConfig.currentPage=i)}),t.qZA()()()()()}if(2&o){const e=n.ngIf,r=t.oxw();t.xp6(2),t.Q6J("hidHeader",!0)("options",!1),t.xp6(28),t.Q6J("ngForOf",t.xi3(31,3,e.customOrderList,r.pagingConfig))}}const Q=function(){return[]},P=function(o){return{customOrderList:o}};let j=(()=>{class o{constructor(e,r,i,d,c,v){this.router=e,this.store=r,this.customOrderService=i,this.roleService=d,this.roleStoreService=c,this.modalService=v,this.pagingConfig=(0,Y.F)({}),this.active=1,this.customOrderList$=this.store.selectAll(),this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.customOrderService.getAll().subscribe())}navigateCustomOrder(e=0){this.router.navigate(["custom-order",e])}openDeleteConfirmationModal(e){const r={item:e,message:`delete custom order: ${e.orderNumberId}`,modalType:F.w.Confirmation},d=this.modalService.show(F.b,{initialState:r,class:"modal-sm modal-dialog-centered"}).content?.onClose.pipe((0,p.b)(c=>{c&&this.customOrderService.deleteCustomOrder(e)})).subscribe();d&&this.subscriptions.push(d)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(h.F0),t.Y36(g),t.Y36(x),t.Y36(y.N),t.Y36(b.M),t.Y36(K.tT))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-custom-order-list"]],decls:2,vars:6,consts:[[4,"ngIf"],[1,"col-xl-12"],["cardTitle","","blockClass","table-border-style",3,"hidHeader","options"],[1,"d-flex"],[1,"text-end","d-flex","flex-row","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"feather","icon-plus"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["previousLabel","Prev","nextLabel","Next",3,"pageChange"],["id","actionsBtn",1,"feather","icon-edit","m-r-15",3,"click"],["id","actionsBtn",1,"feather","icon-trash-2",3,"click"]],template:function(r,i){if(1&r&&(t.YNc(0,G,34,6,"div",0),t.ALo(1,"async")),2&r){let d;t.Q6J("ngIf",t.VKq(4,P,null!==(d=t.lcZ(1,1,i.customOrderList$))&&void 0!==d?d:t.DdM(3,Q)))}},dependencies:[m.sg,m.O5,Z.A,C.LS,m.Ov,C._s]})}return o})();var z=s(2572);function N({id:o=0,contractorId:n=0,personOfContact:e="",orderNumberId:r=0,photo:i=new File([],""),dateOfDelivery:d=new Date,isDeleted:c=!1,createdOn:v=new Date}){return{id:o,contractorId:n,personOfContact:e,orderNumberId:r,photo:i,dateOfDelivery:d,isDeleted:c,createdOn:v}}var l=s(95);function R(o,n){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.role)}}function V(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.uppertUser())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("disabled",e.customOrderForm.invalid),t.xp6(1),t.hij("",0===e.customOrderForm.value.id?"Create":"Update"," User")}}function X(o,n){if(1&o&&(t.TgZ(0,"div")(1,"div",1)(2,"app-card",2)(3,"form",3)(4,"h5"),t._uU(5),t.qZA(),t._UZ(6,"hr"),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11,"Contractor"),t.TgZ(12,"span",8),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"select",9)(15,"option",10),t._uU(16,"Select"),t.qZA(),t.YNc(17,R,2,2,"option",11),t.qZA()()(),t.TgZ(18,"div",5)(19,"div",6)(20,"label",12),t._uU(21,"Person Of Contact"),t.TgZ(22,"span",8),t._uU(23,"*"),t.qZA()(),t._UZ(24,"input",13),t.qZA()(),t.TgZ(25,"div",5)(26,"div",6)(27,"label",14),t._uU(28,"Order Number"),t.TgZ(29,"span",8),t._uU(30,"*"),t.qZA()(),t.TgZ(31,"select",15)(32,"option",16),t._uU(33,"Male"),t.qZA(),t.TgZ(34,"option",17),t._uU(35,"Female"),t.qZA()()()(),t.TgZ(36,"div",5)(37,"div",6)(38,"label",18),t._uU(39,"Date of Delivery"),t.TgZ(40,"span",8),t._uU(41,"*"),t.qZA()(),t._UZ(42,"input",19),t.qZA()(),t.TgZ(43,"div",5)(44,"div",6)(45,"label",20),t._uU(46,"Photo "),t.qZA(),t._UZ(47,"input",21),t.qZA()()()(),t.TgZ(48,"div",1)(49,"button",22),t._uU(50,"Cancel"),t.qZA(),t.YNc(51,V,2,2,"button",23),t.qZA()()()()),2&o){const e=n.ngIf,r=t.oxw();t.xp6(2),t.Q6J("hidHeader",!0)("options",!1),t.xp6(1),t.Q6J("formGroup",r.customOrderForm),t.xp6(2),t.hij("",0===r.customOrderForm.value.id?"Add":"Edit"," Custom Order"),t.xp6(12),t.Q6J("ngForOf",e.roleList),t.xp6(32),t.Q6J("routerLink","/users"),t.xp6(2),t.Q6J("ngIf",r.customOrderForm.dirty)}}const W=function(){return[]},w=function(o){return{roleList:o}},k=[{path:"",component:j},{path:":id",component:(()=>{class o{get customOrderFormControl(){return this.customOrderForm.controls}get id(){return this.customOrderForm.get("id")}get contractorId(){return this.customOrderForm.get("contractorId")}get orderNumberId(){return this.customOrderForm.get("orderNumberId")}get dateOfDelivery(){return this.customOrderForm.get("dateOfDelivery")}get personOfContact(){return this.customOrderForm.get("personOfContact")}constructor(e,r,i,d,c,v,rt,ot,st){this.route=e,this.formBuilder=r,this.store=i,this.customOrderService=d,this.userService=c,this.roleService=v,this.roleStoreService=rt,this.userStoreService=ot,this._router=st,this.subscriptions=[],this.roleList$=this.roleStoreService.selectAll(),this.customOrderForm=this.formBuilder.nonNullable.group({id:[0],contractorId:[0],personOfContact:[""],orderNumberId:[0],dateOfDelivery:[new Date]})}ngOnInit(){this.subscriptions.push((0,z.a)([this.route.params,this.userService.getAll(),this.roleService.getAll(),this.customOrderService.getAll()]).pipe((0,p.b)(([e])=>{if(e.id){const r=Number(e.id),i=this.store.getById(r)??N({});this.customOrderForm.setValue({id:i.id,contractorId:i.contractorId,personOfContact:i.personOfContact,orderNumberId:i.orderNumberId,dateOfDelivery:i.dateOfDelivery})}})).subscribe())}uppertUser(){const e=N({id:this.id.value,contractorId:this.contractorId.value,personOfContact:this.personOfContact.value,orderNumberId:this.orderNumberId.value,dateOfDelivery:this.dateOfDelivery.value});(this.customOrderForm.valid||this.customOrderForm.disabled)&&this.subscriptions.push(this.customOrderService.upsertCustomOrder(e).pipe((0,p.b)(()=>{this.customOrderForm.markAsPristine(),this.navigate()})).subscribe())}cancel(){}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}navigate(){this._router.navigate(["/custom-order"])}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(h.gz),t.Y36(l.qu),t.Y36(g),t.Y36(x),t.Y36(U.K),t.Y36(y.N),t.Y36(b.M),t.Y36(S.p),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-custom-order-detail"]],decls:2,vars:6,consts:[[4,"ngIf"],[1,"col-md-12"],["cardTitle","",3,"hidHeader","options"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","userRole"],[1,"required"],["id","userRole","formControlName","roleId",1,"form-control"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["for","name"],["type","text","id","name","placeholder","Ex: John","formControlName","name",1,"form-control"],["for","gender"],["id","gender","formControlName","gender",1,"form-control"],["value","M"],["value","F"],["for","mobileNumber"],["type","date","id","mobileNumber","placeholder","Ex: 012345678","formControlName","mobileNumber",1,"form-control"],["for","email"],["type","file","id","email","placeholder","Ex: xyz@gmail.com","formControlName","emailAddress",1,"form-control"],["type","button",1,"btn","btn-outline-primary","m-r-15",3,"routerLink"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[3,"value"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(r,i){if(1&r&&(t.YNc(0,X,52,7,"div",0),t.ALo(1,"async")),2&r){let d;t.Q6J("ngIf",t.VKq(4,w,null!==(d=t.lcZ(1,1,i.roleList$))&&void 0!==d?d:t.DdM(3,W)))}},dependencies:[m.sg,m.O5,h.rH,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,Z.A,m.Ov]})}return o})()}];let tt=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(k),h.Bz]})}return o})(),et=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({providers:[S.p,U.K,y.N,b.M,g,x],imports:[m.ez,tt,m.ez,L.m,C.JX,D.D,Z.A,J.N8]})}return o})()}}]);